<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using the Client Program &mdash; kodiaq 0.9 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/bstheme.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="_static/theme.js"></script>
    <link rel="top" title="kodiaq 0.9 documentation" href="index.html" />
    <link rel="next" title="Deployment of the Full System" href="deployment.html" />
    <link rel="prev" title="Installation of the client UI" href="installation.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

<div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">
        kodiaq</a>
      <span class="navbar-text navbar-version pull-left"><b>0.9</b></span>
    </div>
    
    <div class="collapse navbar-collapse"><!-- nav-collapse">-->
      <ul class="nav navbar-nav pull-right">
        <!--<li class="divider-vertical"></li>  -->
        
        
        
        
         
            

<li>
    <a href="installation.html" title="Previous Chapter: Installation of the client UI"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Installation of ...</span>
    </a>
  </li>
  <li>
    <a href="deployment.html" title="Next Chapter: Deployment of the Full System"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Deployment of th... &raquo;</span>
    </a>
  </li>
          
        
        
        
        
      </ul>
      
      <!--          
		    
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
		     -->
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
      <div class="col-md-3" id="leftCol">
        <!--<div id="sidebar" class="bs-sidenav" role="complementary"> -->
	<br><br>
	<ul id="sidebar" class="nav nav-stacked"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="webinterface.html">A Tour of the Web Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation of the client UI</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Using the Client Program</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#logging-in">Logging In</a></li>
<li class="toctree-l2"><a class="reference internal" href="#daq-status-window">DAQ Status window</a></li>
<li class="toctree-l2"><a class="reference internal" href="#control-window">Control Window</a></li>
<li class="toctree-l2"><a class="reference internal" href="#messages-window">Messages Window</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment of the Full System</a></li>
<li class="toctree-l1"><a class="reference internal" href="options.html">DAQ Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="protocols.html">Data Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoringdatabase.html">Monitoring DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoringdatabase.html#run-modes">Run Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="jargon.html">Jargon Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help</a></li>
</ul>

<!--<li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Welcome</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#scope-of-the-program">Scope of the program</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#use-guidelines">Use Guidelines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webinterface.html">A Tour of the Web Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="webinterface.html#introduction">Introduction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation of the client UI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#fetching-the-source-code">Fetching the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#compiling-the-ui-module">Compiling the UI module</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#running-the-code">Running the code</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Using the Client Program</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#logging-in">Logging In</a></li>
<li class="toctree-l2"><a class="reference internal" href="#daq-status-window">DAQ Status window</a></li>
<li class="toctree-l2"><a class="reference internal" href="#control-window">Control Window</a></li>
<li class="toctree-l2"><a class="reference internal" href="#messages-window">Messages Window</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment of the Full System</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deployment.html#summary-of-dependencies-per-module">Summary of Dependencies per Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html#deployment-step-by-step">Deployment, Step by Step</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html#koslave">koSlave</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html#komaster">koMaster</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deployment.html#run-modes">Run Modes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html#deployment-of-the-standalone-reader-module">Deployment of the Standalone Reader Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="options.html">DAQ Options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="options.html#general-syntax">General Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="options.html#electronics-definitions">Electronics Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="options.html#run-options">Run Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="options.html#output-options">Output Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="options.html#vme-options">VME Options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="protocols.html">Data Formats</a><ul>
<li class="toctree-l2"><a class="reference internal" href="protocols.html#output-to-mongodb">Output to Mongodb</a><ul>
<li class="toctree-l3"><a class="reference internal" href="protocols.html#run-control-document">Run Control Document</a></li>
<li class="toctree-l3"><a class="reference internal" href="protocols.html#data-documents">Data Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="protocols.html#data-format">Data Format</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="monitoringdatabase.html">Monitoring DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoringdatabase.html#run-modes">Run Modes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="monitoringdatabase.html#registers">Registers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="jargon.html">Jargon Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help</a></li>
</ul>
</ul>
</li> -->
<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </ul>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="using-the-client-program">
<h1>Using the Client Program<a class="headerlink" href="#using-the-client-program" title="Permalink to this headline">¶</a></h1>
<p>Users wanting slightly more control than provided by the web interface
can login via the client program. The client program is also more
responsive (updates from the slaves are processed more often) so it
may be better for testing usage.</p>
<p>The DAQ client program is written in ncurses and is designed to be run
in a terminal over a remote connection. The ncurses library was chosen
for its broad compatibility with most terminal emulators and the
ability to run it over an ssh connection without X forwarding. This
eliminates the need for us to handle the security.</p>
<p>There are 3 sub-windows in the DAQ UI: control, monitoring, and
history. The following is a basic explanation of the information
provided and interactions possible with each.</p>
<div class="section" id="logging-in">
<h2>Logging In<a class="headerlink" href="#logging-in" title="Permalink to this headline">¶</a></h2>
<p>After starting the client program you will be presented with a login
screen. You should enter your name in the bottom line. The other three
lines probably don&#8217;t need to be changed unless you are not running the
default setup. The top line is the address of the computer running the
koMaster program (dispatcher). The next two lines define the ports
over which internal communication will take place.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You have to have the ability to actually connect to the dispatcher in order for this to work. If the dispatcher is sitting behind a firewall, for example, you will need to get inside or forward the ports before connecting.</p>
</div>
</div>
<div class="section" id="daq-status-window">
<h2>DAQ Status window<a class="headerlink" href="#daq-status-window" title="Permalink to this headline">¶</a></h2>
<p>The DAQ status window is on the right side of the screen and is split
into two parts. The top part gives general information on the state of
the overall DAQ while the bottom part gives information on the status
of each connected slave. We will start from the top down.</p>
<ul>
<li><dl class="first docutils">
<dt>Network <em>(Disconnected/Connected)</em>:</dt>
<dd><p class="first last">The DAQ network is the connection of the master program to the slave PCs. If the network
interface is up and at least one slave is connected this field will
read &#8220;Connected&#8221;.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Acquisition <em>(Idle/Armed/Running/Mixed)</em>:</dt>
<dd><p class="first last">This tells if the DAQ is taking data or not. If the boards are not doing anything they are
in idle state. The DAQ cannot be started in idle state. In order to
start the DAQ the user has to choose a run mode. Once a mode is chosen
the run mode is sent to the slave modules where mode-specific options
are loaded into the digitizers. If all slaves successfully load the
options the DAQ is in armed mode and can be started. If the DAQ is
taking data it is in running mode, stopping the DAQ puts it back to
armed mode. If all slave modes are not reporting the same mode the DAQ
is in mixed mode. This is normal for a brief amount of time upon a state
change but should not persist for more than a couple seconds.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>DAQ Mode <em>(a string)</em>:</dt>
<dd><p class="first last">Gives the name of the run mode used to collect the most recent run.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Current Run <em>(run name)</em>:</dt>
<dd><p class="first last">Gives the name of the current or most recently stopped run.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Started by <em>(user name)</em>:</dt>
<dd><p class="first last">Gives the name of the user who started the current or most recently stopped run.</p>
</dd>
</dl>
</li>
</ul>
<p>The lower part of the window provides information on each slave
connected. The color of the slave name indicates its state (red-idle,
yellow-armed, green-running). The rate given is the rate data is read
out of the readout buffers of the digitizers. Due to formatting and
zipping this is different than the rate actually transferred to the
event builder buffer. The number of boards given is simply the number
of digitizers connected to that slave. The frequency is the frequency
of reads from the readout buffers of the digitizer. It is possible for
multiple occurrences to be read in a single buffer. Note that this has
nothing to do with the frequency of events since the concept of an
event does not exist at this point in the data stream.</p>
</div>
<div class="section" id="control-window">
<h2>Control Window<a class="headerlink" href="#control-window" title="Permalink to this headline">¶</a></h2>
<p>The control window is on the top left and allows the user to control
the DAQ. The options provided are dependent on the current state of
the DAQ. The following table describes what each option does and under
what states the option is available.</p>
<table border="1" class="table-hover docutils">
<colgroup>
<col width="23%" />
<col width="25%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">States</th>
<th class="head">Action</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Connect</td>
<td>DAQ Disconnected</td>
<td><div class="first last line-block">
<div class="line">Puts up the DAQ network. The</div>
<div class="line">master will put up its interface</div>
<div class="line">and wait for 10 seconds for slaves to</div>
<div class="line">connect</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>Broadcast Message</td>
<td>All</td>
<td><div class="first last line-block">
<div class="line">Puts a message into the DAQ log and</div>
<div class="line">broadcasts it to all connected UIs</div>
</div>
</td>
</tr>
<tr class="row-even"><td>Choose Operation
Mode</td>
<td>DAQ Connected</td>
<td><div class="first last line-block">
<div class="line">Asks the master for a list of</div>
<div class="line">available run modes. The user can</div>
<div class="line">then choose a mode from the list.</div>
<div class="line">the chosen mode is shipped to the</div>
<div class="line">slaves and the boards are armed.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>Put DAQ into
Standby Mode</td>
<td>DAQ Armed</td>
<td><div class="first last line-block">
<div class="line">Clears the last run mode and puts the</div>
<div class="line">boards into the idle state. Use this</div>
<div class="line">if you won&#8217;t use the DAQ for a bit</div>
</div>
</td>
</tr>
<tr class="row-even"><td>Reset DAQ</td>
<td>Idle</td>
<td><div class="first last line-block">
<div class="line">Disconnects and reconnects the DAQ</div>
<div class="line">network. Used to debug connection</div>
<div class="line">issues.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>Start DAQ</td>
<td>Armed</td>
<td><div class="first last line-block">
<div class="line">Starts acquisition into a new run.</div>
</div>
</td>
</tr>
<tr class="row-even"><td>Stop  DAQ</td>
<td>Running</td>
<td><div class="first last line-block">
<div class="line">Stops acquisition.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td>Quit</td>
<td>Running</td>
<td><div class="first last line-block">
<div class="line">Quit out of the UI. This does not</div>
<div class="line">have any effect on the DAQ itself.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="messages-window">
<h2>Messages Window<a class="headerlink" href="#messages-window" title="Permalink to this headline">¶</a></h2>
<p>The messages window displays the last 1000 lines of the DAQ log file
as well as any messages for the user (certain messages are not
recorder in the log). Scrolling is done with the arrow
keys or the mouse wheel. In order to place a message in the log file
use the &#8220;Broadcast Message&#8221; command. If you want to see something
older than 1000 lines you have to look up the actual DAQ log files.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Daniel Coderre.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>